/**
 * plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*global tinymce:true */

tinymce.PluginManager.add('ksave', function(editor) {
  function save() {
    tinymce.triggerSave();
  }

  function stateToggle() {
    var self = this;

    editor.on('nodeChange', function() {
      //self.disabled(!editor.isDirty());
    });
  }

  editor.addCommand('mcekSave', save);

  editor.addButton('ksave', {
    text: 'Save',
    cmd: 'mcekSave',
    icon: false,
    disabled: false,
    onPostRender: stateToggle
  });

  editor.addShortcut('ctrl+s', '', 'mcekSave');
});
